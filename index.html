<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FoxiGrow Clone - Mustafa Alaa</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #050505;
            --card-bg: rgba(255, 255, 255, 0.05);
            --primary-glow: #ff9900;
            --secondary-glow: #00ffcc;
            --text-main: #ffffff;
            --border: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 50% 10%, #1a1a1a, #000);
            color: var(--text-main);
            margin: 0; padding: 0;
            min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
        }

        /* --- Header Section --- */
        .top-bar {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avatar-circle {
            width: 50px; height: 50px;
            background: linear-gradient(45deg, var(--primary-glow), #ff4d00);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; border: 2px solid var(--border);
            box-shadow: 0 0 15px rgba(255, 153, 0, 0.3);
        }

        .user-info h3 { margin: 0; font-size: 1.1rem; }
        .level-badge {
            background: rgba(255,255,255,0.1);
            padding: 2px 10px; border-radius: 20px;
            font-size: 0.7rem; color: var(--primary-glow);
            border: 1px solid var(--primary-glow);
        }

        /* --- Stats Grid (Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø«Ù„Ø§Ø«Ø©) --- */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 0 20px;
            margin-top: 10px;
        }

        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 15px 5px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-card img { width: 24px; margin-bottom: 8px; }
        .stat-card .val { font-size: 1.2rem; font-weight: 800; display: block; }
        .stat-card .label { font-size: 0.65rem; color: #888; }
        .stat-card.active { border-color: var(--primary-glow); }

        /* --- Daily Check-in Card --- */
        .action-card {
            margin: 20px;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border);
        }

        .checkin-btn {
            background: var(--primary-glow);
            width: 45px; height: 45px;
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
        }

        /* --- Bottom Nav Bar --- */
        .nav-bar {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(20px);
            display: flex; justify-content: space-around;
            padding: 15px 10px;
            border-top: 1px solid var(--border);
        }

        .nav-item {
            display: flex; flex-direction: column;
            align-items: center; gap: 5px;
            color: #666; font-size: 0.75rem; text-decoration: none;
        }

        .nav-item.active { color: var(--primary-glow); }
        .nav-item i { font-size: 1.4rem; }

        /* --- Animations --- */
        .glow-text-orange { color: #ff9900; text-shadow: 0 0 10px rgba(255,153,0,0.5); }
        .glow-text-green { color: #00ffcc; text-shadow: 0 0 10px rgba(0,255,204,0.5); }

    </style>
</head>
<body>

    <div class="top-bar">
        <div class="user-profile">
            <div class="avatar-circle" id="user-avatar">M</div>
            <div class="user-info">
                <h3 id="user-name">Mustafa Alaa</h3>
                <span class="level-badge">LV.2 Ù…Ø¨ØªØ¯Ø¦</span>
            </div>
        </div>
        <div class="settings-icon">âš™ï¸</div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <span class="val" style="color: #ff6600;">6</span>
            <span class="label">Ù…ÙƒØªÙ…Ù„</span>
        </div>
        <div class="stat-card active">
            <span class="val glow-text-orange" id="fg-balance">8.1</span>
            <span class="label">FG coin</span>
        </div>
        <div class="stat-card">
            <span class="val glow-text-green" id="usdt-balance">0.23</span>
            <span class="label">USDT</span>
        </div>
    </div>

    <div class="action-card">
        <div>
            <h4 style="margin:0">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h4>
            <p style="margin:5px 0 0; font-size:0.8rem; color:#888;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ 2 ÙŠÙˆÙ… | ØªØ³Ù„Ø³Ù„ 2 ÙŠÙˆÙ…</p>
        </div>
        <div class="checkin-btn" onclick="handleDailyCheckin()">ğŸ“…</div>
    </div>

    <div class="action-card" style="margin-top:0; border-style: dashed;">
        <div style="display:flex; align-items:center; gap:15px;">
            <span>ğŸ“–</span>
            <h4 style="margin:0">Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ</h4>
        </div>
        <span> > </span>
    </div>

    <nav class="nav-bar">
        <a href="#" class="nav-item active">ğŸ <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
        <a href="#" class="nav-item">ğŸ¯<span>Ø§Ù„Ù…Ù‡Ø§Ù…</span></a>
        <a href="#" class="nav-item">ğŸ†<span>Ø§Ù„ØªØµÙ†ÙŠÙ</span></a>
        <a href="#" class="nav-item">ğŸ“Š<span>Ø§Ù„Ù†Ø´Ø§Ø·</span></a>
        <a href="#" class="nav-item">ğŸ‘¤<span>Ø§Ù„Ù…Ù„Ù</span></a>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ (ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø·Ø§Ø¨Ù‚ØªÙ‡Ø§ Ù„Ù…Ø´Ø±ÙˆØ¹Ùƒ)
        const firebaseConfig = {
            apiKey: "AIzaSyACixZDVCNww716fRN_29xm2kCnFadkL64",
            authDomain: "tele-ea6e7.firebaseapp.com",
            projectId: "tele-ea6e7",
            storageBucket: "tele-ea6e7.firebasestorage.app",
            messagingSenderId: "693110799024",
            appId: "1:693110799024:web:4dd4057eef17b9ed3e1975"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const tg = window.Telegram.WebApp;
        tg.expand();

        let userId = tg.initDataUnsafe?.user?.id?.toString() || "guest_user";

        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ù„Ø­Ø¸ÙŠØ§Ù‹
        const userRef = doc(db, "users", userId);

        async function initApp() {
            const snap = await getDoc(userRef);
            if (!snap.exists()) {
                await setDoc(userRef, {
                    name: tg.initDataUnsafe?.user?.first_name || "Mustafa",
                    balance_fg: 8.1,
                    balance_usdt: 0.23,
                    level: 2,
                    daily_streak: 2
                });
            }

            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
            onSnapshot(userRef, (doc) => {
                const data = doc.data();
                document.getElementById('fg-balance').innerText = data.balance_fg;
                document.getElementById('usdt-balance').innerText = data.balance_usdt;
                document.getElementById('user-name').innerText = data.name;
                document.getElementById('user-avatar').innerText = data.name.charAt(0);
            });
        }

        window.handleDailyCheckin = () => {
            tg.showConfirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ", (ok) => {
                if(ok) tg.showAlert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±! +0.1 FG");
            });
        };

        initApp();
    </script>
</body>
</html>
